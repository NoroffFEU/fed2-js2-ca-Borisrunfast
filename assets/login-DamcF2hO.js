function n(a,t){window.localStorage.setItem(a,JSON.stringify(t))}async function i({email:a,password:t}){const o=await fetch("https://v2.api.noroff.dev/auth/login",{method:"POST",headers:{"content-Type":"application/json"},body:JSON.stringify({email:a,password:t})}),e=await o.json();return o.ok&&(n("userData",e.data),n("accessToken",e.data.accessToken)),e}async function s(a){let t;try{t=await i(a)}catch(o){alert(o)}finally{t.data?(alert(`Logged in as: ${t?.data.name}`),window.location.href=window.location.origin):t.errors&&alert(`error: ${t.errors[0].message}`)}}const r=document.forms.login;r.addEventListener("submit",a=>{a.preventDefault();const t=new FormData(r),o=Object.fromEntries(t);s(o)});
