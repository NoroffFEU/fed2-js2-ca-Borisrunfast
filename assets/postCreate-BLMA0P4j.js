import{A as s,a as i}from"./constants-D_jcPeRz.js";import{a as c}from"./authGuard-DDO8JLiG.js";async function d({title:o,body:a,tags:t,media:e}){const r=await fetch(s,{method:"POST",headers:{"content-Type":"application/json",Authorization:`Bearer ${JSON.parse(localStorage.accessToken)}`,"X-Noroff-API-Key":i},body:JSON.stringify({title:o,body:a,tags:[t],media:{...e}})});return{data:await r.json(),response:r}}async function l(o){let a;try{a=await d(o)}catch(t){alert(`error: ${t}`)}finally{a.response.ok&&(alert("The post has been created"),window.location.href=`${window.location.origin}`)}}c();const n=document.forms.createPost;n.addEventListener("submit",o=>{o.preventDefault();const a=new FormData(n),t=Object.fromEntries(a),e={title:t.title,body:t.body,tags:t.tags,media:{url:t.url,alt:t.alt}};l(e)});
